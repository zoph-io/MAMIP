{
    "PolicyVersion": {
        "CreateDate": "2025-10-30T19:34:07Z", 
        "VersionId": "v3", 
        "Document": {
            "Version": "2012-10-17", 
            "Statement": [
                {
                    "Action": [
                        "datazone:*"
                    ], 
                    "Resource": [
                        "*"
                    ], 
                    "Effect": "Allow", 
                    "Sid": "DataZone"
                }, 
                {
                    "Action": [
                        "iam:GetRole", 
                        "iam:ListRoles", 
                        "sts:AssumeRole"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "IamSts"
                }, 
                {
                    "Action": "iam:CreateServiceLinkedRole", 
                    "Resource": [
                        "arn:aws:iam::*:role/aws-service-role/neptune-graph.amazonaws.com/AWSServiceRoleForNeptuneGraph", 
                        "arn:aws:iam::*:role/aws-service-role/redshift.amazonaws.com/AWSServiceRoleForRedshift", 
                        "arn:aws:iam::*:role/aws-service-role/sagemaker.amazonaws.com/AWSServiceRoleForAmazonSageMakerNotebooks", 
                        "arn:aws:iam::*:role/aws-service-role/ops.emr-serverless.amazonaws.com/AWSServiceRoleForAmazonEMRServerless", 
                        "arn:aws:iam::*:role/aws-service-role/airflow.amazonaws.com/AWSServiceRoleForAmazonMWAA", 
                        "arn:aws:iam::*:role/aws-service-role/elasticmapreduce.amazonaws.com/AWSServiceRoleForEMRCleanup", 
                        "arn:aws:iam::*:role/aws-service-role/sagemaker.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_SageMakerEndpoint", 
                        "arn:aws:iam::*:role/aws-service-role/observability.aoss.amazonaws.com/AWSServiceRoleForAmazonOpenSearchServerless"
                    ], 
                    "Effect": "Allow", 
                    "Sid": "CreateSLR"
                }, 
                {
                    "Action": [
                        "iam:TagRole", 
                        "sts:TagSession"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "ForAllValues:StringLike": {
                            "aws:TagKeys": [
                                "AmazonDataZone*"
                            ]
                        }
                    }, 
                    "Sid": "TagRoleAndSession"
                }, 
                {
                    "Action": [
                        "iam:CreateRole"
                    ], 
                    "Resource": [
                        "arn:aws:iam::*:role/service-role/AmazonSageMaker*"
                    ], 
                    "Effect": "Allow", 
                    "Sid": "CreateRole"
                }, 
                {
                    "Action": "iam:AttachRolePolicy", 
                    "Resource": "arn:aws:iam::*:role/service-role/AmazonSageMaker*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "ArnEquals": {
                            "iam:PolicyARN": [
                                "arn:aws:iam::aws:policy/SageMakerStudioUserIAMDefaultExecutionPolicy", 
                                "arn:aws:iam::aws:policy/SageMakerStudioUserIAMPermissiveExecutionPolicy", 
                                "arn:aws:iam::aws:policy/service-role/AmazonS3TablesLakeFormationServiceRole"
                            ]
                        }
                    }, 
                    "Sid": "AttachPolicy"
                }, 
                {
                    "Action": "sts:SetSourceIdentity", 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringLike": {
                            "sts:SourceIdentity": "${aws:PrincipalTag/datazone:userId}"
                        }
                    }, 
                    "Sid": "SourceIdentity"
                }, 
                {
                    "Action": "iam:PassRole", 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "iam:PassedToService": [
                                "sagemaker.amazonaws.com", 
                                "lakeformation.amazonaws.com", 
                                "glue.amazonaws.com"
                            ], 
                            "aws:ResourceAccount": "${aws:PrincipalAccount}"
                        }
                    }, 
                    "Sid": "PassRoleForProvisioning"
                }, 
                {
                    "Action": "iam:PassRole", 
                    "Resource": [
                        "arn:aws:iam::*:role/service-role/AmazonSageMaker*", 
                        "arn:aws:iam::*:role/${aws:PrincipalTag/AmazonDataZonePassedRolePath}"
                    ], 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "iam:PassedToService": [
                                "datazone.amazonaws.com", 
                                "bedrock.amazonaws.com", 
                                "scheduler.amazonaws.com"
                            ]
                        }
                    }, 
                    "Sid": "PassRole"
                }, 
                {
                    "Action": [
                        "glue:StartCompletion", 
                        "q:Get*", 
                        "q:List*", 
                        "q:PassRequest", 
                        "q:SendMessage", 
                        "q:StartConversation"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "Q"
                }, 
                {
                    "Action": [
                        "ssm:DeleteParameter", 
                        "ssm:GetParameter*", 
                        "ssm:PutParameter"
                    ], 
                    "Resource": [
                        "arn:aws:ssm:*:*:parameter/amazon/datazone/q*", 
                        "arn:aws:ssm:*:*:parameter/amazon/datazone/genAI/*", 
                        "arn:aws:ssm:*::parameter/aws/service/sagemaker-distribution/*"
                    ], 
                    "Effect": "Allow", 
                    "Sid": "SSMParameter"
                }, 
                {
                    "Action": "sagemaker:*", 
                    "Resource": [
                        "arn:aws:sagemaker:*:*:app/*", 
                        "arn:aws:sagemaker:*:*:space/*", 
                        "arn:aws:sagemaker:*:*:domain/*", 
                        "arn:aws:sagemaker:*:*:user-profile/*"
                    ], 
                    "Effect": "Allow", 
                    "Sid": "ManageSageMakerSpace"
                }, 
                {
                    "Action": [
                        "resource-groups:GetGroupQuery", 
                        "resource-groups:ListGroupResources"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "ResourceGroupsPermissions"
                }, 
                {
                    "Action": [
                        "sagemaker:AddTags", 
                        "sagemaker:Batch*", 
                        "sagemaker:DeleteTags", 
                        "sagemaker:Describe*", 
                        "sagemaker:List*", 
                        "sagemaker:Search", 
                        "sagemaker:*Endpoint*", 
                        "sagemaker:*Model*", 
                        "sagemaker:*Context*", 
                        "sagemaker:*Artifact*", 
                        "sagemaker:*Action*", 
                        "sagemaker:*Association*", 
                        "sagemaker:QueryLineage", 
                        "sagemaker:*InferenceComponent*", 
                        "sagemaker:*Job*", 
                        "sagemaker:StartMlflowTrackingServer", 
                        "sagemaker:StopMlflowTrackingServer", 
                        "sagemaker:CreatePresignedMlflowTrackingServerUrl", 
                        "sagemaker-mlflow:*"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "SageMakerPermissions"
                }, 
                {
                    "Action": [
                        "s3:CreateBucket", 
                        "s3:DeleteBucketPolicy", 
                        "s3:Get*", 
                        "s3:Put*"
                    ], 
                    "Resource": [
                        "arn:aws:s3:::amazon-sagemaker*"
                    ], 
                    "Effect": "Allow", 
                    "Sid": "CreateBucket"
                }, 
                {
                    "Action": [
                        "s3:GetBucketAcl", 
                        "s3:List*"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "S3List"
                }, 
                {
                    "Action": [
                        "s3:GetObject*", 
                        "s3:List*", 
                        "s3:PutObject*"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringNotEquals": {
                            "aws:ResourceAccount": "${aws:PrincipalAccount}"
                        }
                    }, 
                    "Sid": "S3CrossAccount"
                }, 
                {
                    "Action": [
                        "cloudformation:*"
                    ], 
                    "Resource": [
                        "arn:aws:cloudformation:*:*:stack/DataZone*"
                    ], 
                    "Effect": "Allow", 
                    "Sid": "CfnManage"
                }, 
                {
                    "Action": "cloudformation:ValidateTemplate", 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "ValidateCfn"
                }, 
                {
                    "Action": [
                        "cloudwatch:PutMetricData", 
                        "logs:CreateLogGroup", 
                        "logs:CreateLogStream", 
                        "logs:Describe*", 
                        "logs:Get*", 
                        "logs:PutLogEvents", 
                        "logs:StopQuery"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "LogsAndMetrics"
                }, 
                {
                    "Action": [
                        "lakeformation:BatchGrantPermissions", 
                        "lakeformation:BatchRevokePermissions", 
                        "lakeformation:DeregisterResource", 
                        "lakeformation:DescribeResource", 
                        "lakeformation:GetDataAccess", 
                        "lakeformation:GetDataLakeSettings", 
                        "lakeformation:GrantPermissions", 
                        "lakeformation:ListPermissions", 
                        "lakeformation:ListResources", 
                        "lakeformation:PutDataLakeSettings", 
                        "lakeformation:RegisterResource", 
                        "lakeformation:RevokePermissions", 
                        "lakeformation:ListLakeFormationOptIns", 
                        "lakeformation:CreateLakeFormationOptIn", 
                        "lakeformation:DeleteLakeFormationOptIn"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "LFManage"
                }, 
                {
                    "Action": [
                        "glue:*"
                    ], 
                    "Resource": [
                        "arn:aws:glue:*:*:database/*", 
                        "arn:aws:glue:*:*:table/*", 
                        "arn:aws:glue:*:*:catalog", 
                        "arn:aws:glue:*:*:catalog/*", 
                        "arn:aws:glue:*:*:connection/*"
                    ], 
                    "Effect": "Allow", 
                    "Sid": "GlueDatabase"
                }, 
                {
                    "Action": [
                        "glue:*"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "glue:LakeFormationPermissions": "Enabled"
                        }
                    }, 
                    "Sid": "GlueLakeFormation"
                }, 
                {
                    "Action": [
                        "glue:CancelStatement", 
                        "glue:CreateSession", 
                        "glue:DeleteSession", 
                        "glue:Describe*", 
                        "glue:Get*", 
                        "glue:List*", 
                        "glue:NotifyEvent", 
                        "glue:RunStatement", 
                        "glue:StartCompletion", 
                        "glue:StopSession", 
                        "glue:TagResource", 
                        "glue:UntagResource", 
                        "glue:UseGlueStudio", 
                        "glue:*Job*"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "Glue"
                }, 
                {
                    "Action": [
                        "sqlworkbench:*"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "SQLWorkBench"
                }, 
                {
                    "Action": "redshift-data:*", 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "redshift-data:statement-owner-iam-userid": "${aws:userid}"
                        }
                    }, 
                    "Sid": "RedshiftData"
                }, 
                {
                    "Action": [
                        "redshift-data:BatchExecuteStatement", 
                        "redshift-data:Describe*", 
                        "redshift-data:ExecuteStatement", 
                        "redshift-data:List*", 
                        "redshift-serverless:GetManagedWorkgroup", 
                        "redshift-serverless:GetNamespace", 
                        "redshift-serverless:GetWorkgroup", 
                        "redshift-serverless:List*", 
                        "redshift:Describe*", 
                        "redshift:GetClusterCredentialsWithIAM", 
                        "redshift-serverless:GetCredentials"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "RedShiftActions"
                }, 
                {
                    "Action": "bedrock:*", 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "Bedrock"
                }, 
                {
                    "Action": [
                        "dynamodb:List*", 
                        "dynamodb:Describe*", 
                        "dynamodb:Scan", 
                        "dynamodb:PartiQLSelect", 
                        "dynamodb:Query", 
                        "secretsmanager:ListSecrets"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "FederatedConn"
                }, 
                {
                    "Action": [
                        "athena:*"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "Athena"
                }, 
                {
                    "Action": [
                        "secretsmanager:CreateSecret", 
                        "secretsmanager:DeleteSecret", 
                        "secretsmanager:DescribeSecret", 
                        "secretsmanager:GetSecretValue", 
                        "secretsmanager:TagResource", 
                        "secretsmanager:UpdateSecret", 
                        "secretsmanager:PutResourcePolicy"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "Null": {
                            "aws:ResourceTag/AmazonDataZoneProject": "false"
                        }
                    }, 
                    "Sid": "ManagePrivateSecret"
                }, 
                {
                    "Action": [
                        "secretsmanager:CreateSecret", 
                        "secretsmanager:DeleteSecret", 
                        "secretsmanager:DescribeSecret", 
                        "secretsmanager:GetSecretValue", 
                        "secretsmanager:TagResource", 
                        "secretsmanager:UpdateSecret"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "Null": {
                            "aws:ResourceTag/AmazonDataZoneProject": "true"
                        }, 
                        "StringEquals": {
                            "aws:ResourceTag/for-use-with-all-datazone-projects": "true"
                        }
                    }, 
                    "Sid": "ManageSharedSecret"
                }, 
                {
                    "Action": [
                        "secretsmanager:CreateSecret", 
                        "secretsmanager:RotateSecret", 
                        "secretsmanager:DescribeSecret", 
                        "secretsmanager:UpdateSecret", 
                        "secretsmanager:DeleteSecret", 
                        "secretsmanager:TagResource"
                    ], 
                    "Resource": "arn:aws:secretsmanager:*:*:secret:redshift!*", 
                    "Effect": "Allow", 
                    "Sid": "RedshiftSecret"
                }, 
                {
                    "Action": [
                        "codewhisperer:GenerateRecommendations"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "GenerateRecommendations"
                }, 
                {
                    "Action": "scheduler:*", 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "ManageScheduler"
                }, 
                {
                    "Action": [
                        "ecr:BatchCheckLayerAvailability", 
                        "ecr:BatchGetImage", 
                        "ecr:DescribeImages", 
                        "ecr:GetAuthorizationToken", 
                        "ecr:GetDownloadUrlForLayer"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "Ecr"
                }, 
                {
                    "Action": [
                        "codeconnections:*", 
                        "codestar-connections:*"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "CodeConnectionsAdmin"
                }, 
                {
                    "Action": [
                        "kms:DescribeKey", 
                        "kms:ListAliases", 
                        "kms:ListGrants"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "KmsListAndDescribe"
                }, 
                {
                    "Action": [
                        "kms:Decrypt", 
                        "kms:GenerateDataKey"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "ForAnyValue:StringEquals": {
                            "kms:EncryptionContextKeys": "aws:datazone:domainId"
                        }, 
                        "StringLike": {
                            "kms:ViaService": "datazone.*.amazonaws.com"
                        }
                    }, 
                    "Sid": "DataZoneKms"
                }, 
                {
                    "Action": [
                        "kms:Decrypt", 
                        "kms:GenerateDataKey"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "Null": {
                            "kms:EncryptionContext:aws:s3:arn": "false"
                        }, 
                        "StringLike": {
                            "kms:ViaService": "s3.*.amazonaws.com"
                        }
                    }, 
                    "Sid": "S3Kms"
                }, 
                {
                    "Action": [
                        "kms:Decrypt", 
                        "kms:GenerateDataKey"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "Null": {
                            "kms:EncryptionContext:aws:scheduler:schedule:arn": "false"
                        }, 
                        "StringLike": {
                            "kms:ViaService": "scheduler.*.amazonaws.com"
                        }
                    }, 
                    "Sid": "SchedulerKms"
                }, 
                {
                    "Action": [
                        "kms:Decrypt", 
                        "kms:Encrypt", 
                        "kms:GenerateDataKey"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "Null": {
                            "kms:EncryptionContext:SecretARN": "false"
                        }, 
                        "StringLike": {
                            "kms:ViaService": "secretsmanager.*.amazonaws.com"
                        }
                    }, 
                    "Sid": "SecretsKms"
                }, 
                {
                    "Action": [
                        "kms:Decrypt", 
                        "kms:Encrypt", 
                        "kms:GenerateDataKey", 
                        "kms:GenerateDataKeyWithoutPlaintext"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "Null": {
                            "kms:EncryptionContextKeys": "false"
                        }, 
                        "StringLike": {
                            "kms:ViaService": "sagemaker.*.amazonaws.com"
                        }
                    }, 
                    "Sid": "SageMakerKms"
                }, 
                {
                    "Action": [
                        "kms:CreateGrant"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringLike": {
                            "kms:ViaService": "sagemaker.*.amazonaws.com"
                        }
                    }, 
                    "Sid": "SageMakerCreateGrant"
                }, 
                {
                    "Action": [
                        "kms:Decrypt", 
                        "kms:Encrypt", 
                        "kms:GenerateDataKey", 
                        "kms:GenerateDataKeyWithoutPlaintext"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "Null": {
                            "kms:EncryptionContextKeys": "false"
                        }, 
                        "StringLike": {
                            "kms:ViaService": "glue.*.amazonaws.com"
                        }
                    }, 
                    "Sid": "GlueKms"
                }, 
                {
                    "Action": [
                        "kms:CreateGrant", 
                        "kms:Decrypt", 
                        "kms:GenerateDataKey"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "Null": {
                            "kms:EncryptionContextKeys": "false"
                        }, 
                        "StringLike": {
                            "kms:ViaService": "bedrock.*.amazonaws.com"
                        }
                    }, 
                    "Sid": "BedrockKms"
                }, 
                {
                    "Action": [
                        "ec2:CreateSecurityGroup"
                    ], 
                    "Resource": [
                        "arn:aws:ec2:*:*:security-group/*", 
                        "arn:aws:ec2:*:*:vpc/*"
                    ], 
                    "Effect": "Allow", 
                    "Sid": "CreateSG"
                }, 
                {
                    "Action": [
                        "ec2:DeleteSecurityGroup", 
                        "ec2:RevokeSecurityGroupEgress", 
                        "ec2:RevokeSecurityGroupIngress"
                    ], 
                    "Resource": [
                        "arn:aws:ec2:*:*:security-group/*"
                    ], 
                    "Effect": "Allow", 
                    "Sid": "SGManage"
                }, 
                {
                    "Action": [
                        "ec2:AuthorizeSecurityGroupEgress", 
                        "ec2:AuthorizeSecurityGroupIngress"
                    ], 
                    "Resource": [
                        "arn:aws:ec2:*:*:security-group/*"
                    ], 
                    "Effect": "Allow", 
                    "Condition": {
                        "Null": {
                            "aws:ResourceTag/AmazonDataZoneProject": "false"
                        }
                    }, 
                    "Sid": "SGAuth"
                }, 
                {
                    "Action": "ec2:Describe*", 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "Ec2DescribeOnly"
                }, 
                {
                    "Action": [
                        "ec2:CreateTags"
                    ], 
                    "Resource": "arn:aws:ec2:*:*:security-group/*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "ForAllValues:StringLike": {
                            "aws:TagKeys": [
                                "AmazonDataZone*", 
                                "aws:cloudformation:*"
                            ]
                        }
                    }, 
                    "Sid": "SGCreateTags"
                }, 
                {
                    "Action": [
                        "ec2:CreateNetworkInterface", 
                        "ec2:DeleteNetworkInterface"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "VpcAccess"
                }, 
                {
                    "Action": [
                        "ec2:CreateTags", 
                        "ec2:DeleteTags"
                    ], 
                    "Resource": [
                        "arn:aws:ec2:*:*:network-interface/*"
                    ], 
                    "Effect": "Allow", 
                    "Sid": "EC2TagAccessForVpc"
                }, 
                {
                    "Action": [
                        "emr-serverless:ListApplications", 
                        "emr-serverless:GetApplication"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "EMRServerless"
                }
            ]
        }, 
        "IsDefaultVersion": true
    }
}
