{
    "PolicyVersion": {
        "CreateDate": "2025-11-14T22:49:07Z", 
        "VersionId": "v2", 
        "Document": {
            "Version": "2012-10-17", 
            "Statement": [
                {
                    "Action": [
                        "datazone:*"
                    ], 
                    "Resource": [
                        "*"
                    ], 
                    "Effect": "Allow", 
                    "Sid": "AmazonDataZoneStatement"
                }, 
                {
                    "Action": [
                        "iam:ListRoles", 
                        "iam:GetRole", 
                        "iam:GetUser"
                    ], 
                    "Resource": [
                        "*"
                    ], 
                    "Effect": "Allow", 
                    "Sid": "ReadOnlyStatement"
                }, 
                {
                    "Action": "iam:PassRole", 
                    "Resource": [
                        "arn:aws:iam::*:role/service-role/AmazonSageMaker*"
                    ], 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "iam:passedToService": "datazone.amazonaws.com"
                        }
                    }, 
                    "Sid": "IAMPassRoleStatement"
                }, 
                {
                    "Action": [
                        "ssm:GetParameter", 
                        "ssm:GetParametersByPath", 
                        "ssm:PutParameter", 
                        "ssm:DeleteParameter"
                    ], 
                    "Resource": [
                        "arn:aws:ssm:*:*:parameter/amazon/datazone/q*"
                    ], 
                    "Effect": "Allow", 
                    "Sid": "SSMParameterStatement"
                }, 
                {
                    "Action": [
                        "ec2:DescribeVpcs", 
                        "ec2:DescribeSubnets", 
                        "ec2:DescribeSecurityGroups", 
                        "ec2:DescribeInternetGateways", 
                        "ec2:DescribeAddresses", 
                        "ec2:DescribeNatGateways", 
                        "ec2:DescribeRouteTables", 
                        "ec2:DescribeVpcEndpoints", 
                        "ec2:DescribeVpcEndpointServices", 
                        "ec2:DescribeAvailabilityZones"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "DescribeEc2Permissions"
                }, 
                {
                    "Action": [
                        "ec2:CreateVpc"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "aws:RequestTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "CreateTaggedEc2Resources"
                }, 
                {
                    "Action": [
                        "ec2:CreateSubnet"
                    ], 
                    "Resource": [
                        "arn:aws:ec2:*:*:subnet/*", 
                        "arn:aws:ec2:*:*:vpc/*"
                    ], 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "aws:RequestTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "CreateTaggedSubnet"
                }, 
                {
                    "Action": [
                        "ec2:CreateSubnet"
                    ], 
                    "Resource": "arn:aws:ec2:*:*:vpc/*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "aws:ResourceTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "CreateSubnetInTaggedVPC"
                }, 
                {
                    "Action": [
                        "ec2:CreateSecurityGroup"
                    ], 
                    "Resource": [
                        "arn:aws:ec2:*:*:security-group/*"
                    ], 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "aws:RequestTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "CreateTaggedSecurityGroup"
                }, 
                {
                    "Action": [
                        "ec2:CreateSecurityGroup"
                    ], 
                    "Resource": [
                        "arn:aws:ec2:*:*:security-group/*", 
                        "arn:aws:ec2:*:*:vpc/*"
                    ], 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "aws:ResourceTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "CreateTaggedSecurityGroupInVPC"
                }, 
                {
                    "Action": [
                        "ec2:CreateVpcEndpoint"
                    ], 
                    "Resource": [
                        "arn:aws:ec2:*:*:vpc-endpoint/*"
                    ], 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "aws:RequestTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "CreateTaggedVPCEndpoint"
                }, 
                {
                    "Action": [
                        "ec2:CreateVpcEndpoint"
                    ], 
                    "Resource": [
                        "arn:aws:ec2:*:*:security-group/*", 
                        "arn:aws:ec2:*:*:vpc/*", 
                        "arn:aws:ec2:*:*:subnet/*", 
                        "arn:aws:ec2:*:*:route-table/*"
                    ], 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "aws:ResourceTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "CreateVPCEndpointInTaggedResources"
                }, 
                {
                    "Action": [
                        "ec2:CreateInternetGateway"
                    ], 
                    "Resource": "arn:aws:ec2:*:*:internet-gateway/*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "aws:RequestTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "CreateInternetGateway"
                }, 
                {
                    "Action": [
                        "ec2:CreateNatGateway"
                    ], 
                    "Resource": [
                        "arn:aws:ec2:*:*:natgateway/*"
                    ], 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "aws:RequestTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "CreateTaggedNatGateway"
                }, 
                {
                    "Action": [
                        "ec2:CreateNatGateway"
                    ], 
                    "Resource": [
                        "arn:aws:ec2:*:*:subnet/*", 
                        "arn:aws:ec2:*:*:elastic-ip/*"
                    ], 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "aws:ResourceTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "CreateNatGatewayInTaggedSubnet"
                }, 
                {
                    "Action": [
                        "ec2:CreateRouteTable"
                    ], 
                    "Resource": [
                        "arn:aws:ec2:*:*:route-table/*"
                    ], 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "aws:RequestTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "CreateTaggedRouteTable"
                }, 
                {
                    "Action": [
                        "ec2:CreateRouteTable"
                    ], 
                    "Resource": [
                        "arn:aws:ec2:*:*:vpc/*"
                    ], 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "aws:ResourceTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "CreateRouteTableInTaggedSubnet"
                }, 
                {
                    "Action": [
                        "ec2:AllocateAddress"
                    ], 
                    "Resource": "arn:aws:ec2:*:*:elastic-ip/*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "aws:RequestTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "AllocateAddress"
                }, 
                {
                    "Action": [
                        "ec2:ModifyVpcAttribute", 
                        "ec2:AuthorizeSecurityGroupIngress", 
                        "ec2:AuthorizeSecurityGroupEgress", 
                        "ec2:RevokeSecurityGroupEgress", 
                        "ec2:RevokeSecurityGroupIngress"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "ec2:ResourceTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "ModifyTaggedEc2Resources"
                }, 
                {
                    "Action": [
                        "ec2:AttachInternetGateway"
                    ], 
                    "Resource": [
                        "arn:aws:ec2:*:*:internet-gateway/*", 
                        "arn:aws:ec2:*:*:vpc/*"
                    ], 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "ec2:ResourceTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "AttachInternetGateway"
                }, 
                {
                    "Action": [
                        "ec2:CreateRoute"
                    ], 
                    "Resource": [
                        "arn:aws:ec2:*:*:route-table/*"
                    ], 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "ec2:ResourceTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "CreateRoute"
                }, 
                {
                    "Action": [
                        "ec2:AssociateRouteTable"
                    ], 
                    "Resource": [
                        "arn:aws:ec2:*:*:route-table/*", 
                        "arn:aws:ec2:*:*:subnet/*"
                    ], 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "ec2:ResourceTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "AssociateRouteTable"
                }, 
                {
                    "Action": "ec2:CreateTags", 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "ec2:CreateAction": [
                                "CreateVpc", 
                                "CreateSubnet", 
                                "CreateSecurityGroup", 
                                "CreateInternetGateway", 
                                "CreateNatGateway", 
                                "CreateRouteTable", 
                                "CreateVpcEndpoint"
                            ], 
                            "aws:RequestTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "Ec2TaggingOperations"
                }, 
                {
                    "Action": "ec2:CreateTags", 
                    "Resource": "arn:aws:ec2:*:*:elastic-ip/*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "aws:RequestTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "Ec2TagEIP"
                }, 
                {
                    "Action": [
                        "cloudformation:ListStacks", 
                        "cloudformation:ListStackResources", 
                        "cloudformation:CreateStack", 
                        "cloudformation:GetTemplateSummary", 
                        "cloudformation:DescribeStacks", 
                        "cloudformation:DescribeStackEvents"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "AllowCFNStackCreation"
                }, 
                {
                    "Action": [
                        "ec2:DeleteVpc", 
                        "ec2:DeleteSubnet", 
                        "ec2:DeleteSecurityGroup", 
                        "ec2:DeleteInternetGateway", 
                        "ec2:DetachInternetGateway", 
                        "ec2:DeleteNatGateway", 
                        "ec2:DisassociateRouteTable", 
                        "ec2:DeleteVpcEndpoints", 
                        "ec2:DeleteRouteTable", 
                        "ec2:DeleteRoute", 
                        "ec2:ReleaseAddress"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "ec2:ResourceTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "DeleteTaggedVpcResources"
                }, 
                {
                    "Action": "ec2:DeleteTags", 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "ec2:ResourceTag/CreatedForUseWithSageMakerUnifiedStudio": "true"
                        }
                    }, 
                    "Sid": "DeleteTagsOnTaggedResources"
                }, 
                {
                    "Action": [
                        "s3:GetObject"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "StringEquals": {
                            "aws:CalledViaFirst": "cloudformation.amazonaws.com"
                        }, 
                        "StringNotEquals": {
                            "aws:ResourceAccount": "${aws:PrincipalAccount}"
                        }
                    }, 
                    "Sid": "S3ReadCFNTemplate"
                }, 
                {
                    "Action": [
                        "kms:DescribeKey", 
                        "kms:ListAliases"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Sid": "KMSReadPermissions"
                }, 
                {
                    "Action": [
                        "kms:Decrypt", 
                        "kms:GenerateDataKey"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "ForAnyValue:StringEquals": {
                            "kms:EncryptionContextKeys": "aws:datazone:domainId"
                        }, 
                        "StringLike": {
                            "kms:ViaService": "datazone.*.amazonaws.com"
                        }
                    }, 
                    "Sid": "DataZoneKMSPermissions"
                }, 
                {
                    "Action": [
                        "kms:CreateGrant"
                    ], 
                    "Resource": "*", 
                    "Effect": "Allow", 
                    "Condition": {
                        "Bool": {
                            "kms:GrantIsForAWSResource": "true"
                        }, 
                        "ForAnyValue:StringEquals": {
                            "kms:EncryptionContextKeys": "aws:datazone:domainId"
                        }, 
                        "StringLike": {
                            "kms:ViaService": "datazone.*.amazonaws.com"
                        }
                    }, 
                    "Sid": "DataZoneKMSGrantPermissions"
                }
            ]
        }, 
        "IsDefaultVersion": true
    }
}
